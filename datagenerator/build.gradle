dependencies {
  compile "com.linkedin.pegasus:generator:11.0.0"
  compile "org.rythmengine:rythm-engine:1.1.7"
  compile "commons-cli:commons-cli:1.3"
  runtime "org.slf4j:slf4j-jdk14:1.6.6"
}

task generateTestDataTemplate(type: JavaExec) {
  ext.sourceDir = project.file('../restlicsharpdata/restlidataintegration/pegasus')
  ext.outputDir = project.file('../restlicsharpdata/restlidataintegration/generatedDataTemplate')

  main = 'com.linkedin.restli.datagenerator.csharp.CSharpRythmGenerator'
  classpath = project.sourceSets.main.output + project.configurations.runtime
  args '--resolverPath', files(sourceDir).asPath,
       '--output', outputDir,
       '--source', sourceDir
}

project.tasks.test.dependsOn(generateTestDataTemplate)
